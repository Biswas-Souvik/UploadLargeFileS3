# S3 Video Upload Service

This project helps you securely upload files, especially videos, directly to an Amazon S3 storage bucket. It does this by creating special, temporary upload links (called "presigned URLs").

## How it Works

1.  **Request an Upload Link**: Your application asks this service for a secure link to upload a file. You just need to tell it the name of the file you want to upload.
2.  **Get a Secure Link**: The service gives your application a unique, temporary link.
3.  **Upload Directly to S3**: Your application then uses this link to upload the file straight to an S3 bucket, without the file ever passing through a separate server.

This method makes file uploads faster and more secure.

## Key Features

- **Secure Uploads**: Generates temporary, secure links for direct file uploads to S3.
- **Serverless**: Uses AWS Lambda and API Gateway for an efficient, scalable, and cost-effective solution.
- **API Endpoint**: Provides a simple way to request these upload links.

## API Endpoint: `GET /presigned-url`

To get a presigned upload URL, send a GET request to the `/presigned-url` endpoint with the name of your file as a query string.

**Example Request Query:**

```
{{baseUrl}}/presigned-url?fileName=sample_file.txt
```

**Example Success Response:**

```json
{
  "url": "https://your-s3-bucket.s3.amazonaws.com/",
  "fields": {
    "acl": "bucket-owner-full-control",
    "bucket": "you-bucket-name",
    "X-Amz-Algorithm": "xyz",
    "X-Amz-Credential": "xyz/date/ap-south-1/s3/aws4_request",
    "X-Amz-Date": "20260103T102001Z",
    "X-Amz-Security-Token": "xyz",
    "key": "files/sample_file.txt",
    "Policy": "xyz",
    "X-Amz-Signature": "xyz"
  }
}
```

You then use this `url` to upload your file.

## Deployment

This project uses AWS Serverless Application Model (SAM). To deploy it to your AWS account, use the SAM CLI:

```bash
# Build the application
sam build

# Deploy it (follow the guided steps)
sam deploy --guided
```
# Then you can use the below script for automated flow
# S3 Presigned POST Upload Script

This script uploads a local file to Amazon S3 using a **presigned POST URL** generated by an API.

## Requirements

- Node.js **18+**
- An API that returns a presigned POST response
- `.env` file with API base URL

## Setup

Create a `.env` file in the project root:

```env
API_BASE_URL=https://your-api-base-url
```

Update the file path if needed:

```ts
const LOCAL_FILE_PATH = './files/SmallFile_1KB.yaml';
```

## Run the Script
(TypeScript):

```bash
npx ts-node ./src/index.ts
```

## What This Script Does

- Reads a local file
- Calls the API to get a presigned POST URL
- Uploads the file directly to S3
- Logs the uploaded S3 object key on success

## Notes

- Presigned fields must be appended **before** the file
- No AWS credentials are required on the client
